<h1>backup_and_rotate</h1>
<p>Scripts to dynamically back up all sites on a host and rotate existing backups</p>
<h1>Backup scripts</h1>
<p><span style="text-decoration: underline;"><strong>archive_helper</strong></span>: grabs a listing of vhosts in the /var/www/html dir and feeds them into xargs to be backed up by the backup script. Run daily as a cron job<br><span style="text-decoration: underline;"><strong>archive_db.sh</strong></span>: performs a mysqldump of the site's database, using a my.cnf file located in each vhost's backup directory for database credentials<br><span style="text-decoration: underline;"><strong>archive.sh</strong></span>: tars and gzips the contents of the vhost directory</p>
<h1>Retention Policy scripts</h1>
<p><span style="text-decoration: underline;"><strong>retain_daily</strong></span>: remove all backups from the daily backups older than7 days<br><span style="text-decoration: underline;"><strong>retain_weekly</strong></span>: copy this week's daily backup into the weekly backup archive, <span style="text-decoration: underline;"><strong>remove weekly</strong></span>: backups older than 4 weeks<br><span style="text-decoration: underline;"><strong>retain_monthly</strong></span>: copy this moth's daily backup into the monthly backup archive, <span style="text-decoration: underline;"><strong>remove monthly</strong></span>: backups older than 12 months<br><span style="text-decoration: underline;"><strong>retain_yearly</strong></span>: copy this year's daily backup into the yearly backup archive. No retention policy in place</p>
